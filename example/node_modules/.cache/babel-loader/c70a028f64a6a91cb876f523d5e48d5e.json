{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { easeIn } from '../utils/curves';\nimport { smallDurationMs } from '../utils/durations';\nimport { useRequestAnimationFrame, useSetTimeout } from '../utils/timer-hooks';\nimport { useElementRef } from '../utils/use-element-ref';\nimport { useLayoutEffect } from '../utils/use-layout-effect';\nimport { useExitingPersistence } from './exiting-persistence';\n/**\n * __ShrinkOut__\n *\n * Will shrink an element down to nothing when exiting.\n * Works best with flex children as collapsing margins can come with undesired behaviour.\n *\n * - [Examples](https://atlaskit.atlassian.com/packages/design-system/motion/docs/entering-motions)\n */\nvar ShrinkOut = function ShrinkOut(_ref) {\n  var children = _ref.children,\n    _ref$duration = _ref.duration,\n    duration = _ref$duration === void 0 ? smallDurationMs : _ref$duration,\n    onFinish = _ref.onFinish;\n  var _useElementRef = useElementRef(),\n    _useElementRef2 = _slicedToArray(_useElementRef, 2),\n    element = _useElementRef2[0],\n    setElementRef = _useElementRef2[1];\n  var exiting = useExitingPersistence();\n  var requestAnimationFrame = useRequestAnimationFrame();\n  var setTimeout = useSetTimeout();\n  var direction = exiting.isExiting ? 'exiting' : 'entering';\n  useLayoutEffect(function () {\n    if (exiting.isExiting && element) {\n      var newStyles = {\n        // We fix both width and height because when changing box sizing to border-box.\n        width: \"\".concat(element.offsetWidth, \"px\"),\n        height: \"\".concat(element.offsetHeight, \"px\"),\n        boxSizing: 'border-box',\n        willChange: 'width,margin'\n      };\n      Object.assign(element.style, newStyles);\n      requestAnimationFrame(function () {\n        requestAnimationFrame(function () {\n          var newStyles = {\n            width: '0px',\n            margin: '0px',\n            // We animate margin down to zero so it doesn't take any space.\n            transitionTimingFunction: easeIn,\n            transitionDuration: \"\".concat(duration, \"ms\"),\n            transitionProperty: 'width,margin'\n          };\n          Object.assign(element.style, newStyles);\n          setTimeout(function () {\n            exiting.onFinish && exiting.onFinish();\n            onFinish && onFinish('exiting');\n          }, duration);\n        });\n      });\n    }\n  });\n  return children({\n    ref: setElementRef\n  }, direction);\n};\nexport default ShrinkOut;","map":{"version":3,"names":["_slicedToArray","easeIn","smallDurationMs","useRequestAnimationFrame","useSetTimeout","useElementRef","useLayoutEffect","useExitingPersistence","ShrinkOut","_ref","children","_ref$duration","duration","onFinish","_useElementRef","_useElementRef2","element","setElementRef","exiting","requestAnimationFrame","setTimeout","direction","isExiting","newStyles","width","concat","offsetWidth","height","offsetHeight","boxSizing","willChange","Object","assign","style","margin","transitionTimingFunction","transitionDuration","transitionProperty","ref"],"sources":["/home/enterpi/Documents/iidm/pixel-kit/node_modules/@atlaskit/motion/dist/esm/entering/shrink-out.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { easeIn } from '../utils/curves';\nimport { smallDurationMs } from '../utils/durations';\nimport { useRequestAnimationFrame, useSetTimeout } from '../utils/timer-hooks';\nimport { useElementRef } from '../utils/use-element-ref';\nimport { useLayoutEffect } from '../utils/use-layout-effect';\nimport { useExitingPersistence } from './exiting-persistence';\n/**\n * __ShrinkOut__\n *\n * Will shrink an element down to nothing when exiting.\n * Works best with flex children as collapsing margins can come with undesired behaviour.\n *\n * - [Examples](https://atlaskit.atlassian.com/packages/design-system/motion/docs/entering-motions)\n */\nvar ShrinkOut = function ShrinkOut(_ref) {\n  var children = _ref.children,\n    _ref$duration = _ref.duration,\n    duration = _ref$duration === void 0 ? smallDurationMs : _ref$duration,\n    onFinish = _ref.onFinish;\n  var _useElementRef = useElementRef(),\n    _useElementRef2 = _slicedToArray(_useElementRef, 2),\n    element = _useElementRef2[0],\n    setElementRef = _useElementRef2[1];\n  var exiting = useExitingPersistence();\n  var requestAnimationFrame = useRequestAnimationFrame();\n  var setTimeout = useSetTimeout();\n  var direction = exiting.isExiting ? 'exiting' : 'entering';\n  useLayoutEffect(function () {\n    if (exiting.isExiting && element) {\n      var newStyles = {\n        // We fix both width and height because when changing box sizing to border-box.\n        width: \"\".concat(element.offsetWidth, \"px\"),\n        height: \"\".concat(element.offsetHeight, \"px\"),\n        boxSizing: 'border-box',\n        willChange: 'width,margin'\n      };\n      Object.assign(element.style, newStyles);\n      requestAnimationFrame(function () {\n        requestAnimationFrame(function () {\n          var newStyles = {\n            width: '0px',\n            margin: '0px',\n            // We animate margin down to zero so it doesn't take any space.\n            transitionTimingFunction: easeIn,\n            transitionDuration: \"\".concat(duration, \"ms\"),\n            transitionProperty: 'width,margin'\n          };\n          Object.assign(element.style, newStyles);\n          setTimeout(function () {\n            exiting.onFinish && exiting.onFinish();\n            onFinish && onFinish('exiting');\n          }, duration);\n        });\n      });\n    }\n  });\n  return children({\n    ref: setElementRef\n  }, direction);\n};\nexport default ShrinkOut;"],"mappings":"AAAA,OAAOA,cAAc,MAAM,sCAAsC;AACjE,SAASC,MAAM,QAAQ,iBAAiB;AACxC,SAASC,eAAe,QAAQ,oBAAoB;AACpD,SAASC,wBAAwB,EAAEC,aAAa,QAAQ,sBAAsB;AAC9E,SAASC,aAAa,QAAQ,0BAA0B;AACxD,SAASC,eAAe,QAAQ,4BAA4B;AAC5D,SAASC,qBAAqB,QAAQ,uBAAuB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,SAAS,GAAG,SAASA,SAASA,CAACC,IAAI,EAAE;EACvC,IAAIC,QAAQ,GAAGD,IAAI,CAACC,QAAQ;IAC1BC,aAAa,GAAGF,IAAI,CAACG,QAAQ;IAC7BA,QAAQ,GAAGD,aAAa,KAAK,KAAK,CAAC,GAAGT,eAAe,GAAGS,aAAa;IACrEE,QAAQ,GAAGJ,IAAI,CAACI,QAAQ;EAC1B,IAAIC,cAAc,GAAGT,aAAa,CAAC,CAAC;IAClCU,eAAe,GAAGf,cAAc,CAACc,cAAc,EAAE,CAAC,CAAC;IACnDE,OAAO,GAAGD,eAAe,CAAC,CAAC,CAAC;IAC5BE,aAAa,GAAGF,eAAe,CAAC,CAAC,CAAC;EACpC,IAAIG,OAAO,GAAGX,qBAAqB,CAAC,CAAC;EACrC,IAAIY,qBAAqB,GAAGhB,wBAAwB,CAAC,CAAC;EACtD,IAAIiB,UAAU,GAAGhB,aAAa,CAAC,CAAC;EAChC,IAAIiB,SAAS,GAAGH,OAAO,CAACI,SAAS,GAAG,SAAS,GAAG,UAAU;EAC1DhB,eAAe,CAAC,YAAY;IAC1B,IAAIY,OAAO,CAACI,SAAS,IAAIN,OAAO,EAAE;MAChC,IAAIO,SAAS,GAAG;QACd;QACAC,KAAK,EAAE,EAAE,CAACC,MAAM,CAACT,OAAO,CAACU,WAAW,EAAE,IAAI,CAAC;QAC3CC,MAAM,EAAE,EAAE,CAACF,MAAM,CAACT,OAAO,CAACY,YAAY,EAAE,IAAI,CAAC;QAC7CC,SAAS,EAAE,YAAY;QACvBC,UAAU,EAAE;MACd,CAAC;MACDC,MAAM,CAACC,MAAM,CAAChB,OAAO,CAACiB,KAAK,EAAEV,SAAS,CAAC;MACvCJ,qBAAqB,CAAC,YAAY;QAChCA,qBAAqB,CAAC,YAAY;UAChC,IAAII,SAAS,GAAG;YACdC,KAAK,EAAE,KAAK;YACZU,MAAM,EAAE,KAAK;YACb;YACAC,wBAAwB,EAAElC,MAAM;YAChCmC,kBAAkB,EAAE,EAAE,CAACX,MAAM,CAACb,QAAQ,EAAE,IAAI,CAAC;YAC7CyB,kBAAkB,EAAE;UACtB,CAAC;UACDN,MAAM,CAACC,MAAM,CAAChB,OAAO,CAACiB,KAAK,EAAEV,SAAS,CAAC;UACvCH,UAAU,CAAC,YAAY;YACrBF,OAAO,CAACL,QAAQ,IAAIK,OAAO,CAACL,QAAQ,CAAC,CAAC;YACtCA,QAAQ,IAAIA,QAAQ,CAAC,SAAS,CAAC;UACjC,CAAC,EAAED,QAAQ,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EACF,OAAOF,QAAQ,CAAC;IACd4B,GAAG,EAAErB;EACP,CAAC,EAAEI,SAAS,CAAC;AACf,CAAC;AACD,eAAeb,SAAS"},"metadata":{},"sourceType":"module"}