{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _actionMap;\nimport { KEY_DOWN, KEY_END, KEY_HOME, KEY_UP } from '@atlaskit/ds-lib/keycodes';\nvar actionMap = (_actionMap = {}, _defineProperty(_actionMap, KEY_DOWN, 'next'), _defineProperty(_actionMap, KEY_UP, 'prev'), _defineProperty(_actionMap, KEY_HOME, 'first'), _defineProperty(_actionMap, KEY_END, 'last'), _actionMap);\n\n/**\n * currentFocusedIdx + 1 will not work if the next focusable element\n * is disabled. So, we need to iterate through the following menu items\n * to find one that isn't disabled. If all following elements are disabled,\n * return undefined.\n */\nvar getNextFocusableElement = function getNextFocusableElement(refs, currentFocusedIdx) {\n  while (currentFocusedIdx + 1 < refs.length) {\n    var isDisabled = refs[currentFocusedIdx + 1].hasAttribute('disabled');\n    if (!isDisabled) {\n      return refs[currentFocusedIdx + 1];\n    }\n    currentFocusedIdx++;\n  }\n};\n\n/**\n * currentFocusedIdx - 1 will not work if the prev focusable element\n * is disabled. So, we need to iterate through the previous menu items\n * to find one that isn't disabled. If all previous elements are disabled,\n * return undefined.\n */\nvar getPrevFocusableElement = function getPrevFocusableElement(refs, currentFocusedIdx) {\n  while (currentFocusedIdx > 0) {\n    var isDisabled = refs[currentFocusedIdx - 1].hasAttribute('disabled');\n    if (!isDisabled) {\n      return refs[currentFocusedIdx - 1];\n    }\n    currentFocusedIdx--;\n  }\n};\nexport default function handleFocus(refs, isLayerDisabled) {\n  return function (e) {\n    var currentFocusedIdx = refs.findIndex(function (el) {\n      var _document$activeEleme;\n      return (_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 ? void 0 : _document$activeEleme.isSameNode(el);\n    });\n    if (isLayerDisabled()) {\n      // if it is a nested dropdown and the level of the given dropdown is not the current level,\n      // we don't need to have focus on it\n      return;\n    }\n    var action = actionMap[e.key];\n    switch (action) {\n      case 'next':\n        // Always cancelling the event to prevent scrolling\n        e.preventDefault();\n        if (currentFocusedIdx < refs.length - 1) {\n          var _nextFocusableElement = getNextFocusableElement(refs, currentFocusedIdx);\n          _nextFocusableElement === null || _nextFocusableElement === void 0 ? void 0 : _nextFocusableElement.focus();\n        }\n        break;\n      case 'prev':\n        // Always cancelling the event to prevent scrolling\n        e.preventDefault();\n        if (currentFocusedIdx > 0) {\n          var _prevFocusableElement = getPrevFocusableElement(refs, currentFocusedIdx);\n          _prevFocusableElement === null || _prevFocusableElement === void 0 ? void 0 : _prevFocusableElement.focus();\n        }\n        break;\n      case 'first':\n        e.preventDefault();\n        // Search for first non-disabled element if first element is disabled\n        var nextFocusableElement = getNextFocusableElement(refs, -1);\n        nextFocusableElement === null || nextFocusableElement === void 0 ? void 0 : nextFocusableElement.focus();\n        break;\n      case 'last':\n        e.preventDefault();\n        // Search for last non-disabled element if last element is disabled\n        var prevFocusableElement = getPrevFocusableElement(refs, refs.length);\n        prevFocusableElement === null || prevFocusableElement === void 0 ? void 0 : prevFocusableElement.focus();\n        break;\n      default:\n        return;\n    }\n  };\n}","map":{"version":3,"names":["_defineProperty","_actionMap","KEY_DOWN","KEY_END","KEY_HOME","KEY_UP","actionMap","getNextFocusableElement","refs","currentFocusedIdx","length","isDisabled","hasAttribute","getPrevFocusableElement","handleFocus","isLayerDisabled","e","findIndex","el","_document$activeEleme","document","activeElement","isSameNode","action","key","preventDefault","_nextFocusableElement","focus","_prevFocusableElement","nextFocusableElement","prevFocusableElement"],"sources":["/home/enterpi/Documents/iidm/pixel-kit/node_modules/@atlaskit/dropdown-menu/dist/esm/internal/utils/handle-focus.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _actionMap;\nimport { KEY_DOWN, KEY_END, KEY_HOME, KEY_UP } from '@atlaskit/ds-lib/keycodes';\nvar actionMap = (_actionMap = {}, _defineProperty(_actionMap, KEY_DOWN, 'next'), _defineProperty(_actionMap, KEY_UP, 'prev'), _defineProperty(_actionMap, KEY_HOME, 'first'), _defineProperty(_actionMap, KEY_END, 'last'), _actionMap);\n\n/**\n * currentFocusedIdx + 1 will not work if the next focusable element\n * is disabled. So, we need to iterate through the following menu items\n * to find one that isn't disabled. If all following elements are disabled,\n * return undefined.\n */\nvar getNextFocusableElement = function getNextFocusableElement(refs, currentFocusedIdx) {\n  while (currentFocusedIdx + 1 < refs.length) {\n    var isDisabled = refs[currentFocusedIdx + 1].hasAttribute('disabled');\n    if (!isDisabled) {\n      return refs[currentFocusedIdx + 1];\n    }\n    currentFocusedIdx++;\n  }\n};\n\n/**\n * currentFocusedIdx - 1 will not work if the prev focusable element\n * is disabled. So, we need to iterate through the previous menu items\n * to find one that isn't disabled. If all previous elements are disabled,\n * return undefined.\n */\nvar getPrevFocusableElement = function getPrevFocusableElement(refs, currentFocusedIdx) {\n  while (currentFocusedIdx > 0) {\n    var isDisabled = refs[currentFocusedIdx - 1].hasAttribute('disabled');\n    if (!isDisabled) {\n      return refs[currentFocusedIdx - 1];\n    }\n    currentFocusedIdx--;\n  }\n};\nexport default function handleFocus(refs, isLayerDisabled) {\n  return function (e) {\n    var currentFocusedIdx = refs.findIndex(function (el) {\n      var _document$activeEleme;\n      return (_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 ? void 0 : _document$activeEleme.isSameNode(el);\n    });\n    if (isLayerDisabled()) {\n      // if it is a nested dropdown and the level of the given dropdown is not the current level,\n      // we don't need to have focus on it\n      return;\n    }\n    var action = actionMap[e.key];\n    switch (action) {\n      case 'next':\n        // Always cancelling the event to prevent scrolling\n        e.preventDefault();\n        if (currentFocusedIdx < refs.length - 1) {\n          var _nextFocusableElement = getNextFocusableElement(refs, currentFocusedIdx);\n          _nextFocusableElement === null || _nextFocusableElement === void 0 ? void 0 : _nextFocusableElement.focus();\n        }\n        break;\n      case 'prev':\n        // Always cancelling the event to prevent scrolling\n        e.preventDefault();\n        if (currentFocusedIdx > 0) {\n          var _prevFocusableElement = getPrevFocusableElement(refs, currentFocusedIdx);\n          _prevFocusableElement === null || _prevFocusableElement === void 0 ? void 0 : _prevFocusableElement.focus();\n        }\n        break;\n      case 'first':\n        e.preventDefault();\n        // Search for first non-disabled element if first element is disabled\n        var nextFocusableElement = getNextFocusableElement(refs, -1);\n        nextFocusableElement === null || nextFocusableElement === void 0 ? void 0 : nextFocusableElement.focus();\n        break;\n      case 'last':\n        e.preventDefault();\n        // Search for last non-disabled element if last element is disabled\n        var prevFocusableElement = getPrevFocusableElement(refs, refs.length);\n        prevFocusableElement === null || prevFocusableElement === void 0 ? void 0 : prevFocusableElement.focus();\n        break;\n      default:\n        return;\n    }\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}