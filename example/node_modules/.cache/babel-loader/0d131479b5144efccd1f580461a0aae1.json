{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport tokens from '../artifacts/token-names';\nimport { CUSTOM_THEME_ATTRIBUTE, THEME_DATA_ATTRIBUTE } from '../constants';\nimport { hash } from './hash';\nexport function findMissingCustomStyleElements(UNSAFE_themeOptions, mode) {\n  var optionString = JSON.stringify(UNSAFE_themeOptions);\n  var uniqueId = hash(optionString);\n  var attrOfMissingCustomStyles = [];\n  (mode === 'auto' ? ['light', 'dark'] : [mode]).forEach(function (themeId) {\n    var element = document.head.querySelector(\"style[\".concat(CUSTOM_THEME_ATTRIBUTE, \"=\\\"\").concat(uniqueId, \"\\\"][\").concat(THEME_DATA_ATTRIBUTE, \"=\\\"\").concat(themeId, \"\\\"]\"));\n    if (element) {\n      // Append the existing custom styles to take precedence over others\n      document.head.appendChild(element);\n    } else {\n      attrOfMissingCustomStyles.push(themeId);\n    }\n  });\n  return attrOfMissingCustomStyles;\n}\nexport function limitSizeOfCustomStyleElements(sizeThreshold) {\n  var styleTags = _toConsumableArray(Array.from(document.head.querySelectorAll(\"style[\".concat(CUSTOM_THEME_ATTRIBUTE, \"][\").concat(THEME_DATA_ATTRIBUTE, \"]\"))));\n  if (styleTags.length < sizeThreshold) {\n    return;\n  }\n  styleTags.slice(0, styleTags.length - (sizeThreshold - 1)).forEach(function (element) {\n    return element.remove();\n  });\n}\nexport function reduceTokenMap(tokenMap, themeRamp) {\n  return Object.entries(tokenMap).reduce(function (acc, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      key = _ref2[0],\n      value = _ref2[1];\n    var cssVar = tokens[key];\n    return cssVar ? \"\".concat(acc, \"\\n  \").concat(cssVar, \": \").concat(typeof value === 'string' ? value : themeRamp[value], \";\") : acc;\n  }, '');\n}","map":{"version":3,"names":["_slicedToArray","_toConsumableArray","tokens","CUSTOM_THEME_ATTRIBUTE","THEME_DATA_ATTRIBUTE","hash","findMissingCustomStyleElements","UNSAFE_themeOptions","mode","optionString","JSON","stringify","uniqueId","attrOfMissingCustomStyles","forEach","themeId","element","document","head","querySelector","concat","appendChild","push","limitSizeOfCustomStyleElements","sizeThreshold","styleTags","Array","from","querySelectorAll","length","slice","remove","reduceTokenMap","tokenMap","themeRamp","Object","entries","reduce","acc","_ref","_ref2","key","value","cssVar"],"sources":["/home/enterpi/Documents/iidm/pixel-kit/node_modules/@atlaskit/popup/node_modules/@atlaskit/tokens/dist/esm/utils/custom-theme-loading-utils.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport tokens from '../artifacts/token-names';\nimport { CUSTOM_THEME_ATTRIBUTE, THEME_DATA_ATTRIBUTE } from '../constants';\nimport { hash } from './hash';\nexport function findMissingCustomStyleElements(UNSAFE_themeOptions, mode) {\n  var optionString = JSON.stringify(UNSAFE_themeOptions);\n  var uniqueId = hash(optionString);\n  var attrOfMissingCustomStyles = [];\n  (mode === 'auto' ? ['light', 'dark'] : [mode]).forEach(function (themeId) {\n    var element = document.head.querySelector(\"style[\".concat(CUSTOM_THEME_ATTRIBUTE, \"=\\\"\").concat(uniqueId, \"\\\"][\").concat(THEME_DATA_ATTRIBUTE, \"=\\\"\").concat(themeId, \"\\\"]\"));\n    if (element) {\n      // Append the existing custom styles to take precedence over others\n      document.head.appendChild(element);\n    } else {\n      attrOfMissingCustomStyles.push(themeId);\n    }\n  });\n  return attrOfMissingCustomStyles;\n}\nexport function limitSizeOfCustomStyleElements(sizeThreshold) {\n  var styleTags = _toConsumableArray(Array.from(document.head.querySelectorAll(\"style[\".concat(CUSTOM_THEME_ATTRIBUTE, \"][\").concat(THEME_DATA_ATTRIBUTE, \"]\"))));\n  if (styleTags.length < sizeThreshold) {\n    return;\n  }\n  styleTags.slice(0, styleTags.length - (sizeThreshold - 1)).forEach(function (element) {\n    return element.remove();\n  });\n}\nexport function reduceTokenMap(tokenMap, themeRamp) {\n  return Object.entries(tokenMap).reduce(function (acc, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      key = _ref2[0],\n      value = _ref2[1];\n    var cssVar = tokens[key];\n    return cssVar ? \"\".concat(acc, \"\\n  \").concat(cssVar, \": \").concat(typeof value === 'string' ? value : themeRamp[value], \";\") : acc;\n  }, '');\n}"],"mappings":"AAAA,OAAOA,cAAc,MAAM,sCAAsC;AACjE,OAAOC,kBAAkB,MAAM,0CAA0C;AACzE,OAAOC,MAAM,MAAM,0BAA0B;AAC7C,SAASC,sBAAsB,EAAEC,oBAAoB,QAAQ,cAAc;AAC3E,SAASC,IAAI,QAAQ,QAAQ;AAC7B,OAAO,SAASC,8BAA8BA,CAACC,mBAAmB,EAAEC,IAAI,EAAE;EACxE,IAAIC,YAAY,GAAGC,IAAI,CAACC,SAAS,CAACJ,mBAAmB,CAAC;EACtD,IAAIK,QAAQ,GAAGP,IAAI,CAACI,YAAY,CAAC;EACjC,IAAII,yBAAyB,GAAG,EAAE;EAClC,CAACL,IAAI,KAAK,MAAM,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,GAAG,CAACA,IAAI,CAAC,EAAEM,OAAO,CAAC,UAAUC,OAAO,EAAE;IACxE,IAAIC,OAAO,GAAGC,QAAQ,CAACC,IAAI,CAACC,aAAa,CAAC,QAAQ,CAACC,MAAM,CAACjB,sBAAsB,EAAE,KAAK,CAAC,CAACiB,MAAM,CAACR,QAAQ,EAAE,MAAM,CAAC,CAACQ,MAAM,CAAChB,oBAAoB,EAAE,KAAK,CAAC,CAACgB,MAAM,CAACL,OAAO,EAAE,KAAK,CAAC,CAAC;IAC7K,IAAIC,OAAO,EAAE;MACX;MACAC,QAAQ,CAACC,IAAI,CAACG,WAAW,CAACL,OAAO,CAAC;IACpC,CAAC,MAAM;MACLH,yBAAyB,CAACS,IAAI,CAACP,OAAO,CAAC;IACzC;EACF,CAAC,CAAC;EACF,OAAOF,yBAAyB;AAClC;AACA,OAAO,SAASU,8BAA8BA,CAACC,aAAa,EAAE;EAC5D,IAAIC,SAAS,GAAGxB,kBAAkB,CAACyB,KAAK,CAACC,IAAI,CAACV,QAAQ,CAACC,IAAI,CAACU,gBAAgB,CAAC,QAAQ,CAACR,MAAM,CAACjB,sBAAsB,EAAE,IAAI,CAAC,CAACiB,MAAM,CAAChB,oBAAoB,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;EAC/J,IAAIqB,SAAS,CAACI,MAAM,GAAGL,aAAa,EAAE;IACpC;EACF;EACAC,SAAS,CAACK,KAAK,CAAC,CAAC,EAAEL,SAAS,CAACI,MAAM,IAAIL,aAAa,GAAG,CAAC,CAAC,CAAC,CAACV,OAAO,CAAC,UAAUE,OAAO,EAAE;IACpF,OAAOA,OAAO,CAACe,MAAM,CAAC,CAAC;EACzB,CAAC,CAAC;AACJ;AACA,OAAO,SAASC,cAAcA,CAACC,QAAQ,EAAEC,SAAS,EAAE;EAClD,OAAOC,MAAM,CAACC,OAAO,CAACH,QAAQ,CAAC,CAACI,MAAM,CAAC,UAAUC,GAAG,EAAEC,IAAI,EAAE;IAC1D,IAAIC,KAAK,GAAGxC,cAAc,CAACuC,IAAI,EAAE,CAAC,CAAC;MACjCE,GAAG,GAAGD,KAAK,CAAC,CAAC,CAAC;MACdE,KAAK,GAAGF,KAAK,CAAC,CAAC,CAAC;IAClB,IAAIG,MAAM,GAAGzC,MAAM,CAACuC,GAAG,CAAC;IACxB,OAAOE,MAAM,GAAG,EAAE,CAACvB,MAAM,CAACkB,GAAG,EAAE,MAAM,CAAC,CAAClB,MAAM,CAACuB,MAAM,EAAE,IAAI,CAAC,CAACvB,MAAM,CAAC,OAAOsB,KAAK,KAAK,QAAQ,GAAGA,KAAK,GAAGR,SAAS,CAACQ,KAAK,CAAC,EAAE,GAAG,CAAC,GAAGJ,GAAG;EACrI,CAAC,EAAE,EAAE,CAAC;AACR"},"metadata":{},"sourceType":"module"}