{"ast":null,"code":"import { useEffect } from 'react';\nimport { bindAll } from 'bind-event-listener';\nimport noop from '@atlaskit/ds-lib/noop';\nimport { UNSAFE_useLayering } from '@atlaskit/layering';\nexport var useCloseManager = function useCloseManager(_ref) {\n  var isOpen = _ref.isOpen,\n    onClose = _ref.onClose,\n    popupRef = _ref.popupRef,\n    triggerRef = _ref.triggerRef,\n    capture = _ref.shouldUseCaptureOnOutsideClick;\n  var _UNSAFE_useLayering = UNSAFE_useLayering(),\n    isLayerDisabled = _UNSAFE_useLayering.isLayerDisabled;\n  useEffect(function () {\n    if (!isOpen || !popupRef) {\n      return noop;\n    }\n    var closePopup = function closePopup(event) {\n      if (onClose) {\n        onClose(event);\n      }\n    };\n\n    // This check is required for cases where components like\n    // Select or DDM are placed inside a Popup. A click\n    // on a MenuItem or Option would close the Popup, without registering\n    // a click on DDM/Select.\n    // Users would have to call `onClose` manually to close the Popup in these cases.\n    // You can see the bug in action here:\n    // https://codesandbox.io/s/atlaskitpopup-default-forked-2eb87?file=/example.tsx:0-1788\n    var onClick = function onClick(event) {\n      var target = event.target;\n      var doesDomNodeExist = document.body.contains(target);\n      if (!doesDomNodeExist) {\n        return;\n      }\n      var isClickOnPopup = popupRef && popupRef.contains(target);\n      var isClickOnTrigger = triggerRef && triggerRef.contains(target);\n      if (!isClickOnPopup && !isClickOnTrigger) {\n        closePopup(event);\n      }\n    };\n    var onKeyDown = function onKeyDown(event) {\n      if (isLayerDisabled()) {\n        return;\n      }\n      var key = event.key;\n      if (key === 'Escape' || key === 'Esc') {\n        closePopup(event);\n      }\n    };\n    var unbind = bindAll(window, [{\n      type: 'click',\n      listener: onClick,\n      options: {\n        capture: capture\n      }\n    }, {\n      type: 'keydown',\n      listener: onKeyDown\n    }]);\n    return unbind;\n  }, [isOpen, onClose, popupRef, triggerRef, capture, isLayerDisabled]);\n};","map":{"version":3,"names":["useEffect","bindAll","noop","UNSAFE_useLayering","useCloseManager","_ref","isOpen","onClose","popupRef","triggerRef","capture","shouldUseCaptureOnOutsideClick","_UNSAFE_useLayering","isLayerDisabled","closePopup","event","onClick","target","doesDomNodeExist","document","body","contains","isClickOnPopup","isClickOnTrigger","onKeyDown","key","unbind","window","type","listener","options"],"sources":["/home/enterpi/Documents/iidm/pixel-kit/node_modules/@atlaskit/popup/dist/esm/use-close-manager.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { bindAll } from 'bind-event-listener';\nimport noop from '@atlaskit/ds-lib/noop';\nimport { UNSAFE_useLayering } from '@atlaskit/layering';\nexport var useCloseManager = function useCloseManager(_ref) {\n  var isOpen = _ref.isOpen,\n    onClose = _ref.onClose,\n    popupRef = _ref.popupRef,\n    triggerRef = _ref.triggerRef,\n    capture = _ref.shouldUseCaptureOnOutsideClick;\n  var _UNSAFE_useLayering = UNSAFE_useLayering(),\n    isLayerDisabled = _UNSAFE_useLayering.isLayerDisabled;\n  useEffect(function () {\n    if (!isOpen || !popupRef) {\n      return noop;\n    }\n    var closePopup = function closePopup(event) {\n      if (onClose) {\n        onClose(event);\n      }\n    };\n\n    // This check is required for cases where components like\n    // Select or DDM are placed inside a Popup. A click\n    // on a MenuItem or Option would close the Popup, without registering\n    // a click on DDM/Select.\n    // Users would have to call `onClose` manually to close the Popup in these cases.\n    // You can see the bug in action here:\n    // https://codesandbox.io/s/atlaskitpopup-default-forked-2eb87?file=/example.tsx:0-1788\n    var onClick = function onClick(event) {\n      var target = event.target;\n      var doesDomNodeExist = document.body.contains(target);\n      if (!doesDomNodeExist) {\n        return;\n      }\n      var isClickOnPopup = popupRef && popupRef.contains(target);\n      var isClickOnTrigger = triggerRef && triggerRef.contains(target);\n      if (!isClickOnPopup && !isClickOnTrigger) {\n        closePopup(event);\n      }\n    };\n    var onKeyDown = function onKeyDown(event) {\n      if (isLayerDisabled()) {\n        return;\n      }\n      var key = event.key;\n      if (key === 'Escape' || key === 'Esc') {\n        closePopup(event);\n      }\n    };\n    var unbind = bindAll(window, [{\n      type: 'click',\n      listener: onClick,\n      options: {\n        capture: capture\n      }\n    }, {\n      type: 'keydown',\n      listener: onKeyDown\n    }]);\n    return unbind;\n  }, [isOpen, onClose, popupRef, triggerRef, capture, isLayerDisabled]);\n};"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,OAAOC,IAAI,MAAM,uBAAuB;AACxC,SAASC,kBAAkB,QAAQ,oBAAoB;AACvD,OAAO,IAAIC,eAAe,GAAG,SAASA,eAAeA,CAACC,IAAI,EAAE;EAC1D,IAAIC,MAAM,GAAGD,IAAI,CAACC,MAAM;IACtBC,OAAO,GAAGF,IAAI,CAACE,OAAO;IACtBC,QAAQ,GAAGH,IAAI,CAACG,QAAQ;IACxBC,UAAU,GAAGJ,IAAI,CAACI,UAAU;IAC5BC,OAAO,GAAGL,IAAI,CAACM,8BAA8B;EAC/C,IAAIC,mBAAmB,GAAGT,kBAAkB,CAAC,CAAC;IAC5CU,eAAe,GAAGD,mBAAmB,CAACC,eAAe;EACvDb,SAAS,CAAC,YAAY;IACpB,IAAI,CAACM,MAAM,IAAI,CAACE,QAAQ,EAAE;MACxB,OAAON,IAAI;IACb;IACA,IAAIY,UAAU,GAAG,SAASA,UAAUA,CAACC,KAAK,EAAE;MAC1C,IAAIR,OAAO,EAAE;QACXA,OAAO,CAACQ,KAAK,CAAC;MAChB;IACF,CAAC;;IAED;IACA;IACA;IACA;IACA;IACA;IACA;IACA,IAAIC,OAAO,GAAG,SAASA,OAAOA,CAACD,KAAK,EAAE;MACpC,IAAIE,MAAM,GAAGF,KAAK,CAACE,MAAM;MACzB,IAAIC,gBAAgB,GAAGC,QAAQ,CAACC,IAAI,CAACC,QAAQ,CAACJ,MAAM,CAAC;MACrD,IAAI,CAACC,gBAAgB,EAAE;QACrB;MACF;MACA,IAAII,cAAc,GAAGd,QAAQ,IAAIA,QAAQ,CAACa,QAAQ,CAACJ,MAAM,CAAC;MAC1D,IAAIM,gBAAgB,GAAGd,UAAU,IAAIA,UAAU,CAACY,QAAQ,CAACJ,MAAM,CAAC;MAChE,IAAI,CAACK,cAAc,IAAI,CAACC,gBAAgB,EAAE;QACxCT,UAAU,CAACC,KAAK,CAAC;MACnB;IACF,CAAC;IACD,IAAIS,SAAS,GAAG,SAASA,SAASA,CAACT,KAAK,EAAE;MACxC,IAAIF,eAAe,CAAC,CAAC,EAAE;QACrB;MACF;MACA,IAAIY,GAAG,GAAGV,KAAK,CAACU,GAAG;MACnB,IAAIA,GAAG,KAAK,QAAQ,IAAIA,GAAG,KAAK,KAAK,EAAE;QACrCX,UAAU,CAACC,KAAK,CAAC;MACnB;IACF,CAAC;IACD,IAAIW,MAAM,GAAGzB,OAAO,CAAC0B,MAAM,EAAE,CAAC;MAC5BC,IAAI,EAAE,OAAO;MACbC,QAAQ,EAAEb,OAAO;MACjBc,OAAO,EAAE;QACPpB,OAAO,EAAEA;MACX;IACF,CAAC,EAAE;MACDkB,IAAI,EAAE,SAAS;MACfC,QAAQ,EAAEL;IACZ,CAAC,CAAC,CAAC;IACH,OAAOE,MAAM;EACf,CAAC,EAAE,CAACpB,MAAM,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,OAAO,EAAEG,eAAe,CAAC,CAAC;AACvE,CAAC"},"metadata":{},"sourceType":"module"}