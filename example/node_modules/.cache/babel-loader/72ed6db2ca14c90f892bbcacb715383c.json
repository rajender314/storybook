{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"children\"];\nimport React, { Fragment, useRef } from 'react';\nimport { isReducedMotion } from '../utils/accessibility';\nimport { easeInOut } from '../utils/curves';\nimport { mediumDurationMs } from '../utils/durations';\nimport { useRequestAnimationFrame, useSetTimeout } from '../utils/timer-hooks';\nimport { useElementRef } from '../utils/use-element-ref';\nimport { useLayoutEffect } from '../utils/use-layout-effect';\nimport { useSnapshotBeforeUpdate } from '../utils/use-snapshot-before-update';\n/**\n * __useResizingHeight__\n *\n * useResizingHeight animates height changes over state changes. If the height hasn't changed nothing will happen.\n *\n * __WARNING__: Potentially janky. This hook animates height which is\n * [notoriously unperformant](https://firefox-source-docs.mozilla.org/performance/bestpractices.html#Get_familiar_with_the_pipeline_that_gets_pixels_to_the_screen).\n * Test your app over low powered devices, you may want to avoid this if you can see it impacting FPS.\n *\n * - [Examples](https://atlaskit.atlassian.com/packages/design-system/motion/docs/resizing-motions)\n */\nexport var useResizingHeight = function useResizingHeight() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    _ref$duration = _ref.duration,\n    calcDuration = _ref$duration === void 0 ? function () {\n      return mediumDurationMs;\n    } : _ref$duration,\n    _ref$timingFunction = _ref.timingFunction,\n    calcTimingFunction = _ref$timingFunction === void 0 ? function () {\n      return easeInOut;\n    } : _ref$timingFunction;\n  var prevDimensions = useRef();\n  var _useElementRef = useElementRef(),\n    _useElementRef2 = _slicedToArray(_useElementRef, 2),\n    element = _useElementRef2[0],\n    setElementRef = _useElementRef2[1];\n  // We cleanup on the next effect to prevent the previous timeout being called during\n  // the next motion - as now the timeout has essentially been extended!\n  var setTimeout = useSetTimeout({\n    cleanup: 'next-effect'\n  });\n  var requestAnimationFrame = useRequestAnimationFrame();\n  useSnapshotBeforeUpdate(function () {\n    if (isReducedMotion() || !element) {\n      return;\n    }\n    prevDimensions.current = element.getBoundingClientRect();\n  });\n  useLayoutEffect(function () {\n    if (isReducedMotion() || !element || !prevDimensions.current) {\n      return;\n    }\n\n    // We might already be animating.\n    // Because of that we need to expand to the destination height first.\n    element.setAttribute('style', '');\n    var nextDimensions = element.getBoundingClientRect();\n    if (nextDimensions.height === prevDimensions.current.height) {\n      return;\n    }\n    var duration = calcDuration(prevDimensions.current.height, nextDimensions.height);\n    var newStyles = {\n      height: \"\".concat(prevDimensions.current.height, \"px\"),\n      willChange: 'height',\n      transitionProperty: 'height',\n      transitionDuration: \"\".concat(duration, \"ms\"),\n      boxSizing: 'border-box',\n      transitionTimingFunction: calcTimingFunction(prevDimensions.current.height, nextDimensions.height, duration)\n    };\n    Object.assign(element.style, newStyles);\n\n    // We split this over two animation frames so the DOM has enough time to flush the changes.\n    // We are deliberately not skipping this frame if another render happens - if we do the motion doesn't finish properly.\n    requestAnimationFrame(function () {\n      requestAnimationFrame(function () {\n        if (!element) {\n          return;\n        }\n        element.style.height = \"\".concat(nextDimensions.height, \"px\");\n        setTimeout(function () {\n          if (!element) {\n            return;\n          }\n          element.setAttribute('style', '');\n        }, duration);\n      });\n    });\n  });\n  return {\n    ref: setElementRef\n  };\n};\n\n/**\n * __ResizingHeight__\n *\n * Component which consumes the useResizingHook() under-the-hood. Its props are the same as the hooks opts.\n *\n * - [Examples](https://atlaskit.atlassian.com/packages/design-system/motion/docs/resizing-motions)\n */\nexport var ResizingHeight = function ResizingHeight(_ref2) {\n  var children = _ref2.children,\n    props = _objectWithoutProperties(_ref2, _excluded);\n  var resizing = useResizingHeight(props);\n  return /*#__PURE__*/React.createElement(Fragment, null, children(resizing));\n};\n\n/**\n * This exists only to be able to extract opts.\n */\nexport default (function (_opts) {});","map":{"version":3,"names":["_objectWithoutProperties","_slicedToArray","_excluded","React","Fragment","useRef","isReducedMotion","easeInOut","mediumDurationMs","useRequestAnimationFrame","useSetTimeout","useElementRef","useLayoutEffect","useSnapshotBeforeUpdate","useResizingHeight","_ref","arguments","length","undefined","_ref$duration","duration","calcDuration","_ref$timingFunction","timingFunction","calcTimingFunction","prevDimensions","_useElementRef","_useElementRef2","element","setElementRef","setTimeout","cleanup","requestAnimationFrame","current","getBoundingClientRect","setAttribute","nextDimensions","height","newStyles","concat","willChange","transitionProperty","transitionDuration","boxSizing","transitionTimingFunction","Object","assign","style","ref","ResizingHeight","_ref2","children","props","resizing","createElement","_opts"],"sources":["/home/enterpi/Documents/iidm/pixel-kit/node_modules/@atlaskit/motion/dist/esm/resizing/height.js"],"sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"children\"];\nimport React, { Fragment, useRef } from 'react';\nimport { isReducedMotion } from '../utils/accessibility';\nimport { easeInOut } from '../utils/curves';\nimport { mediumDurationMs } from '../utils/durations';\nimport { useRequestAnimationFrame, useSetTimeout } from '../utils/timer-hooks';\nimport { useElementRef } from '../utils/use-element-ref';\nimport { useLayoutEffect } from '../utils/use-layout-effect';\nimport { useSnapshotBeforeUpdate } from '../utils/use-snapshot-before-update';\n/**\n * __useResizingHeight__\n *\n * useResizingHeight animates height changes over state changes. If the height hasn't changed nothing will happen.\n *\n * __WARNING__: Potentially janky. This hook animates height which is\n * [notoriously unperformant](https://firefox-source-docs.mozilla.org/performance/bestpractices.html#Get_familiar_with_the_pipeline_that_gets_pixels_to_the_screen).\n * Test your app over low powered devices, you may want to avoid this if you can see it impacting FPS.\n *\n * - [Examples](https://atlaskit.atlassian.com/packages/design-system/motion/docs/resizing-motions)\n */\nexport var useResizingHeight = function useResizingHeight() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    _ref$duration = _ref.duration,\n    calcDuration = _ref$duration === void 0 ? function () {\n      return mediumDurationMs;\n    } : _ref$duration,\n    _ref$timingFunction = _ref.timingFunction,\n    calcTimingFunction = _ref$timingFunction === void 0 ? function () {\n      return easeInOut;\n    } : _ref$timingFunction;\n  var prevDimensions = useRef();\n  var _useElementRef = useElementRef(),\n    _useElementRef2 = _slicedToArray(_useElementRef, 2),\n    element = _useElementRef2[0],\n    setElementRef = _useElementRef2[1];\n  // We cleanup on the next effect to prevent the previous timeout being called during\n  // the next motion - as now the timeout has essentially been extended!\n  var setTimeout = useSetTimeout({\n    cleanup: 'next-effect'\n  });\n  var requestAnimationFrame = useRequestAnimationFrame();\n  useSnapshotBeforeUpdate(function () {\n    if (isReducedMotion() || !element) {\n      return;\n    }\n    prevDimensions.current = element.getBoundingClientRect();\n  });\n  useLayoutEffect(function () {\n    if (isReducedMotion() || !element || !prevDimensions.current) {\n      return;\n    }\n\n    // We might already be animating.\n    // Because of that we need to expand to the destination height first.\n    element.setAttribute('style', '');\n    var nextDimensions = element.getBoundingClientRect();\n    if (nextDimensions.height === prevDimensions.current.height) {\n      return;\n    }\n    var duration = calcDuration(prevDimensions.current.height, nextDimensions.height);\n    var newStyles = {\n      height: \"\".concat(prevDimensions.current.height, \"px\"),\n      willChange: 'height',\n      transitionProperty: 'height',\n      transitionDuration: \"\".concat(duration, \"ms\"),\n      boxSizing: 'border-box',\n      transitionTimingFunction: calcTimingFunction(prevDimensions.current.height, nextDimensions.height, duration)\n    };\n    Object.assign(element.style, newStyles);\n\n    // We split this over two animation frames so the DOM has enough time to flush the changes.\n    // We are deliberately not skipping this frame if another render happens - if we do the motion doesn't finish properly.\n    requestAnimationFrame(function () {\n      requestAnimationFrame(function () {\n        if (!element) {\n          return;\n        }\n        element.style.height = \"\".concat(nextDimensions.height, \"px\");\n        setTimeout(function () {\n          if (!element) {\n            return;\n          }\n          element.setAttribute('style', '');\n        }, duration);\n      });\n    });\n  });\n  return {\n    ref: setElementRef\n  };\n};\n\n/**\n * __ResizingHeight__\n *\n * Component which consumes the useResizingHook() under-the-hood. Its props are the same as the hooks opts.\n *\n * - [Examples](https://atlaskit.atlassian.com/packages/design-system/motion/docs/resizing-motions)\n */\nexport var ResizingHeight = function ResizingHeight(_ref2) {\n  var children = _ref2.children,\n    props = _objectWithoutProperties(_ref2, _excluded);\n  var resizing = useResizingHeight(props);\n  return /*#__PURE__*/React.createElement(Fragment, null, children(resizing));\n};\n\n/**\n * This exists only to be able to extract opts.\n */\nexport default (function (_opts) {});"],"mappings":"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"},"metadata":{},"sourceType":"module"}