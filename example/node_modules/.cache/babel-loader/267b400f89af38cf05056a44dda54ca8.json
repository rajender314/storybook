{"ast":null,"code":"import React, { createContext, useContext, useEffect, useMemo, useRef } from 'react';\nimport __noop from '@atlaskit/ds-lib/noop';\n\n/**\n *\n *  @internal\n * LevelContext which maintains the current level of nested layers\n * Default is 0\n */\nexport var LevelContext = /*#__PURE__*/createContext(0);\n\n/**\n *\n *  @internal\n * TopLevelContext which maintains the top level ref and setTopLevel method of layers\n * Default ref value is null\n *\n */\nexport var TopLevelContext = /*#__PURE__*/createContext({\n  topLevelRef: {\n    current: null\n  },\n  setTopLevel: __noop\n});\n\n/**\n *\n *  @internal\n * Context Provider Component which provider the current level of nested layers\n * It handles level management when it mounts and unmounts\n *\n */\nvar LevelProvider = function LevelProvider(_ref) {\n  var children = _ref.children,\n    currentLevel = _ref.currentLevel;\n  var _useContext = useContext(TopLevelContext),\n    setTopLevel = _useContext.setTopLevel;\n  setTopLevel(currentLevel);\n  useEffect(function () {\n    // avoid immediate cleanup using setTimeout when component unmount\n    // this will make sure non-top layer components can get the correct top level value\n    // when multiple layers trigger onClose in sequence.\n    // From React 17, the useEffect cleanup functions are delayed till the commit phase is completed. In other words, the useEffect cleanup functions run asynchronously - for example, if the component is unmounting, the cleanup runs after the screen has been updated.\n    // TODO revisit after we migrate to react 18. https://product-fabric.atlassian.net/browse/DSP-13139\n    return function () {\n      setTimeout(function () {\n        setTopLevel(currentLevel - 1);\n      }, 0);\n    };\n  }, [setTopLevel, currentLevel]);\n  return /*#__PURE__*/React.createElement(LevelContext.Provider, {\n    value: currentLevel\n  }, children);\n};\n\n/**\n *\n *  @internal\n * Context Provider Component which provides the top level of all nested layers\n * It provides initial top level ref value as 0 and set top level method\n *\n */\nvar LayeringProvider = function LayeringProvider(_ref2) {\n  var children = _ref2.children;\n  var topLevelRef = useRef(0);\n  var value = useMemo(function () {\n    return {\n      topLevelRef: topLevelRef,\n      setTopLevel: function setTopLevel(level) {\n        topLevelRef.current = level;\n      }\n    };\n  }, [topLevelRef]);\n  return /*#__PURE__*/React.createElement(TopLevelContext.Provider, {\n    value: value\n  }, children);\n};\n\n/**\n * __UNSAFE_LAYERING__\n *\n * @experimental Still under development. Do not use.\n *\n * @important the component is toggled by isDisabled props, default is true\n *\n * Layering component is a wrapper to let children to consume layer contexts and hooks.\n *\n */\nexport var UNSAFE_LAYERING = function UNSAFE_LAYERING(_ref3) {\n  var children = _ref3.children,\n    _ref3$isDisabled = _ref3.isDisabled,\n    isDisabled = _ref3$isDisabled === void 0 ? true : _ref3$isDisabled;\n  var currentLevel = useContext(LevelContext);\n  if (isDisabled) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n  }\n  var isNested = currentLevel > 0;\n  var content = /*#__PURE__*/React.createElement(LevelProvider, {\n    currentLevel: currentLevel + 1\n  }, children);\n  return isNested ? content : /*#__PURE__*/React.createElement(LayeringProvider, null, content);\n};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useRef","__noop","LevelContext","TopLevelContext","topLevelRef","current","setTopLevel","LevelProvider","_ref","children","currentLevel","_useContext","setTimeout","createElement","Provider","value","LayeringProvider","_ref2","level","UNSAFE_LAYERING","_ref3","_ref3$isDisabled","isDisabled","Fragment","isNested","content"],"sources":["/home/enterpi/Documents/iidm/pixel-kit/node_modules/@atlaskit/layering/dist/esm/components/context.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useMemo, useRef } from 'react';\nimport __noop from '@atlaskit/ds-lib/noop';\n\n/**\n *\n *  @internal\n * LevelContext which maintains the current level of nested layers\n * Default is 0\n */\nexport var LevelContext = /*#__PURE__*/createContext(0);\n\n/**\n *\n *  @internal\n * TopLevelContext which maintains the top level ref and setTopLevel method of layers\n * Default ref value is null\n *\n */\nexport var TopLevelContext = /*#__PURE__*/createContext({\n  topLevelRef: {\n    current: null\n  },\n  setTopLevel: __noop\n});\n\n/**\n *\n *  @internal\n * Context Provider Component which provider the current level of nested layers\n * It handles level management when it mounts and unmounts\n *\n */\nvar LevelProvider = function LevelProvider(_ref) {\n  var children = _ref.children,\n    currentLevel = _ref.currentLevel;\n  var _useContext = useContext(TopLevelContext),\n    setTopLevel = _useContext.setTopLevel;\n  setTopLevel(currentLevel);\n  useEffect(function () {\n    // avoid immediate cleanup using setTimeout when component unmount\n    // this will make sure non-top layer components can get the correct top level value\n    // when multiple layers trigger onClose in sequence.\n    // From React 17, the useEffect cleanup functions are delayed till the commit phase is completed. In other words, the useEffect cleanup functions run asynchronously - for example, if the component is unmounting, the cleanup runs after the screen has been updated.\n    // TODO revisit after we migrate to react 18. https://product-fabric.atlassian.net/browse/DSP-13139\n    return function () {\n      setTimeout(function () {\n        setTopLevel(currentLevel - 1);\n      }, 0);\n    };\n  }, [setTopLevel, currentLevel]);\n  return /*#__PURE__*/React.createElement(LevelContext.Provider, {\n    value: currentLevel\n  }, children);\n};\n\n/**\n *\n *  @internal\n * Context Provider Component which provides the top level of all nested layers\n * It provides initial top level ref value as 0 and set top level method\n *\n */\nvar LayeringProvider = function LayeringProvider(_ref2) {\n  var children = _ref2.children;\n  var topLevelRef = useRef(0);\n  var value = useMemo(function () {\n    return {\n      topLevelRef: topLevelRef,\n      setTopLevel: function setTopLevel(level) {\n        topLevelRef.current = level;\n      }\n    };\n  }, [topLevelRef]);\n  return /*#__PURE__*/React.createElement(TopLevelContext.Provider, {\n    value: value\n  }, children);\n};\n\n/**\n * __UNSAFE_LAYERING__\n *\n * @experimental Still under development. Do not use.\n *\n * @important the component is toggled by isDisabled props, default is true\n *\n * Layering component is a wrapper to let children to consume layer contexts and hooks.\n *\n */\nexport var UNSAFE_LAYERING = function UNSAFE_LAYERING(_ref3) {\n  var children = _ref3.children,\n    _ref3$isDisabled = _ref3.isDisabled,\n    isDisabled = _ref3$isDisabled === void 0 ? true : _ref3$isDisabled;\n  var currentLevel = useContext(LevelContext);\n  if (isDisabled) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n  }\n  var isNested = currentLevel > 0;\n  var content = /*#__PURE__*/React.createElement(LevelProvider, {\n    currentLevel: currentLevel + 1\n  }, children);\n  return isNested ? content : /*#__PURE__*/React.createElement(LayeringProvider, null, content);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}