{"ast":null,"code":"import { getConfig, MODE } from '../config';\nimport { COLLECTED } from '../constants';\nimport { cloneElements } from './render';\nimport { refElements } from './hydrate';\nexport const collect = () => {\n  const markers = document.querySelectorAll('input[data-lazy-begin]');\n  const {\n    mode\n  } = getConfig();\n  for (let i = 0, j = markers.length; i < j; i += 1) {\n    const el = markers[i];\n    const {\n      lazyBegin\n    } = el.dataset || {};\n    const value = mode === MODE.RENDER ? cloneElements(markers[i], lazyBegin) : refElements(markers[i], lazyBegin);\n    if (COLLECTED.has(lazyBegin)) {\n      COLLECTED.get(lazyBegin).push(value);\n    } else {\n      COLLECTED.set(lazyBegin, [value]);\n    }\n  }\n};","map":{"version":3,"names":["getConfig","MODE","COLLECTED","cloneElements","refElements","collect","markers","document","querySelectorAll","mode","i","j","length","el","lazyBegin","dataset","value","RENDER","has","get","push","set"],"sources":["../../../src/collect/index.ts"],"sourcesContent":["import { getConfig, MODE } from '../config';\nimport { COLLECTED } from '../constants';\n\nimport { cloneElements } from './render';\nimport { refElements } from './hydrate';\n\nexport const collect = () => {\n  const markers = document.querySelectorAll<HTMLInputElement>(\n    'input[data-lazy-begin]'\n  );\n  const { mode } = getConfig();\n  for (let i = 0, j = markers.length; i < j; i += 1) {\n    const el = markers[i];\n    const { lazyBegin } = el.dataset || {};\n    const value =\n      mode === MODE.RENDER\n        ? cloneElements(markers[i], lazyBegin)\n        : refElements(markers[i], lazyBegin);\n\n    if (COLLECTED.has(lazyBegin)) {\n      COLLECTED.get(lazyBegin).push(value);\n    } else {\n      COLLECTED.set(lazyBegin, [value]);\n    }\n  }\n};\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,IAApB,QAAgC,WAAhC;AACA,SAASC,SAAT,QAA0B,cAA1B;AAEA,SAASC,aAAT,QAA8B,UAA9B;AACA,SAASC,WAAT,QAA4B,WAA5B;AAEA,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAC3B,MAAMC,OAAO,GAAGC,QAAQ,CAACC,gBAAT,CACd,wBADc,CAAhB;EAGA,MAAM;IAAEC;EAAF,IAAWT,SAAS,EAA1B;EACA,KAAK,IAAIU,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGL,OAAO,CAACM,MAA5B,EAAoCF,CAAC,GAAGC,CAAxC,EAA2CD,CAAC,IAAI,CAAhD,EAAmD;IACjD,MAAMG,EAAE,GAAGP,OAAO,CAACI,CAAD,CAAlB;IACA,MAAM;MAAEI;IAAF,IAAgBD,EAAE,CAACE,OAAH,IAAc,EAApC;IACA,MAAMC,KAAK,GACTP,IAAI,KAAKR,IAAI,CAACgB,MAAd,GACId,aAAa,CAACG,OAAO,CAACI,CAAD,CAAR,EAAaI,SAAb,CADjB,GAEIV,WAAW,CAACE,OAAO,CAACI,CAAD,CAAR,EAAaI,SAAb,CAHjB;IAKA,IAAIZ,SAAS,CAACgB,GAAV,CAAcJ,SAAd,CAAJ,EAA8B;MAC5BZ,SAAS,CAACiB,GAAV,CAAcL,SAAd,EAAyBM,IAAzB,CAA8BJ,KAA9B;IACD,CAFD,MAEO;MACLd,SAAS,CAACmB,GAAV,CAAcP,SAAd,EAAyB,CAACE,KAAD,CAAzB;IACD;EACF;AACF,CAnBM"},"metadata":{},"sourceType":"module"}